# 宿のシフト管理アプリ 要件定義書

**文書バージョン:** 1.1
**作成日:** 2024年5月16日
**最終更新日:** 2024年5月21日
**作成者:** (あなたの名前、またはプロジェクト名)

---

## 目次

1.  [はじめに](#1-はじめに)
    1.1. [背景](#11-背景)
    1.2. [目的](#12-目的)
    1.3. [本書の位置づけ](#13-本書の位置づけ)
    1.4. [対象読者](#14-対象読者)
2.  [システム概要](#2-システム概要)
    2.1. [システム名](#21-システム名)
    2.2. [システムの概要説明](#22-システムの概要説明)
    2.3. [システム構成](#23-システム構成)
    2.4. [ターゲットユーザー](#24-ターゲットユーザー)
3.  [機能要件](#3-機能要件)
    3.1. [データ管理機能](#31-データ管理機能)
    3.2. [表示機能](#32-表示機能)
    3.3. [シフト編集機能](#33-シフト編集機能)
    3.4. [スタッフ管理機能](#34-スタッフ管理機能)
    3.5. [業務（タスク）管理機能](#35-業務タスク管理機能)
4.  [非機能要件](#4-非機能要件)
    4.1. [UI/UX (ユーザーインターフェース/ユーザーエクスペリエンス)](#41-uiux-ユーザーインターフェースユーザーエクスペリエンス)
    4.2. [パフォーマンス](#42-パフォーマンス)
    4.3. [ブラウザ互換性](#43-ブラウザ互換性)
    4.4. [セキュリティ](#44-セキュリティ)
    4.5. [メンテナンス性](#45-メンテナンス性)
5.  [将来的な拡張機能（検討事項）](#5-将来的な拡張機能検討事項)
6.  [制約事項・前提条件](#6-制約事項前提条件)
    6.1. [開発環境](#61-開発環境)
    6.2. [運用環境](#62-運用環境)
    6.3. [除外事項](#63-除外事項)
7.  [用語集 (任意)](#7-用語集-任意)
8.  [改訂履歴](#8-改訂履歴)

---

## 1. はじめに

### 1.1. 背景
現在、多くの宿泊施設において従業員のシフト管理は手作業や汎用的な表計算ソフト（例：Excel、Googleスプレッドシート）に依存しているケースが見受けられる。これらの方法では、シフト作成の煩雑さ、変更時の柔軟性の低さ、視認性の問題、情報共有の難しさといった課題が存在する。特に、提供されたCSVファイルのような形式でのデータ管理は、インタラクティブな操作や視覚的な把握には限界がある。

### 1.2. 目的
本アプリケーション「宿のシフト管理アプリ」は、宿泊施設におけるシフト管理業務を効率化し、以下の目標を達成することを目的とする。
*   シフト作成・編集作業の負担軽減と時間短縮
*   シフト情報の視覚的な把握の容易化による、人員配置の最適化支援
*   従業員間の円滑な情報共有の促進
*   人的ミスの削減による業務品質の向上
*   既存データ（CSV形式）の活用と、柔軟なデータ管理（JSON形式含む）の実現

### 1.3. 本書の位置づけ
本書は、「宿のシフト管理アプリ」開発プロジェクトにおける要件を定義するものである。開発チーム、関係者が本システムに対する共通認識を持ち、開発の指針とすることを目的とする。

### 1.4. 対象読者
*   プロジェクトマネージャー
*   開発担当者
*   テスト担当者
*   （場合により）導入施設の担当者

## 2. システム概要

### 2.1. システム名
宿のシフト管理アプリ

### 2.2. システムの概要説明
本システムは、宿泊施設における従業員のシフト情報を効率的に作成、編集、管理、および視覚的に表示するためのフロントエンド完結型ウェブアプリケーションである。ユーザーはブラウザ上で直感的な操作（ドラッグ＆ドロップ等）によりシフトを割り当てることができ、月次・週次・日次のガントチャート形式でシフト状況を確認できる。既存のCSV形式のシフトデータのインポート、およびバックアップやデータ移行のためのJSON/CSV形式でのエクスポート機能を備える。

### 2.3. システム構成
本システムは、ユーザーのウェブブラウザ上で動作するフロントエンドアプリケーションとして構成される。サーバーサイドの処理やデータベースは原則として持たず、データはユーザーのブラウザのローカルストレージに保存される。
*   **主要技術要素（想定）:** HTML, CSS, JavaScript (および適切なフレームワーク/ライブラリ)
    *   【追記】**ガントチャート表示・編集ライブラリ:** `vue-ganttastic` (または同等の機能を持つVue 3対応ライブラリ) の利用を検討する。

### 2.4. ターゲットユーザー
*   **主たる利用者:** 宿泊施設のシフト管理者（フロントマネージャー、支配人など）
*   **副次的な利用者:** シフト情報を確認する一般従業員（閲覧が主となる可能性）

## 3. 機能要件

### 3.1. データ管理機能
*   **F-DM-001: ローカルストレージへのデータ保存**
    *   シフトデータ（割り当て済みタスク）、スタッフ情報（氏名、休日）、業務テンプレート情報は、ユーザーのブラウザのローカルストレージに保存される。アプリケーションを閉じてもデータは保持される。
*   **F-DM-002: CSVインポート** 【更新】
    *   指定された形式（ヘッダー例: `日付`, `名前`, `開始時刻`, `終了時刻`, `休憩開始`, `休憩終了`）のCSVファイル（UTF-8、カンマ区切り）をインポートし、アプリケーション内のデータ形式（主に割り当て済みタスク）に変換して取り込める。
    *   CSVの1行を1つの勤務タスクとして扱い、休憩時間はタスクの備考などに記録する。業務内容はCSV形式に含まず、インポート時はデフォルトのタスク名（例: 「勤務」）で登録する。
    *   インポート時に既存の割り当て済みタスクデータは上書きされる。CSVに記載されたスタッフがシステムに存在しない場合は新規スタッフとして追加する。
    *   エラーハンドリング（不正な形式のCSV、必須項目欠損など）を行う。
*   **F-DM-003: CSVエクスポート** 【更新】
    *   アプリケーション内の割り当て済みタスクデータを、F-DM-002で定義されたヘッダー形式のCSVファイルとしてエクスポート（ダウンロード）できる。
*   **F-DM-004: JSONインポート**
    *   アプリケーション独自のデータ構造（スタッフ情報、休日情報、業務テンプレート、割り当て済みタスク等を含む）を持つJSONファイルをインポートし、アプリケーションデータとして取り込める。
    *   インポート時に既存の全アプリケーションデータを上書きする。
*   **F-DM-005: JSONエクスポート**
    *   アプリケーション内の全データ（スタッフ情報、休日情報、業務テンプレート、割り当て済みタスク等）を、アプリケーション独自のデータ構造のJSONファイルとしてエクスポート（ダウンロード）できる。これは主にバックアップやデータ移行を目的とする。
*   **F-DM-006: データクリア機能**
    *   ローカルストレージに保存されている全てのアプリケーションデータをクリアする機能。誤操作防止のため確認ダイアログを表示する。

### 3.2. 表示機能
*   **F-VW-001: カレンダービュー (月次)**
    *   選択された月のカレンダーを表示する。
    *   各日付セルには、その日に勤務するスタッフの概要（例: スタッフ数、主要な勤務時間帯など）を簡易表示する。
    *   日付セルクリックで、該当日の日次ビューに遷移する。
    *   前月/翌月へのナビゲーション機能を提供する。
*   **F-VW-002: ガントチャートビュー (週次)**
    *   選択された週のシフトをガントチャート形式で表示する。
    *   縦軸に従業員名（またはリソース）、横軸に日付と時間（1時間単位など調整可能）を表示する。
    *   各従業員の勤務時間帯をタスクバーで表示する。
    *   タスクバーには業務内容の概要（タスク名）を表示する。
    *   前週/翌週へのナビゲーション機能を提供する。
*   **F-VW-003: ガントチャートビュー (日次)**
    *   選択された日のシフトをガントチャート形式で詳細表示する。
    *   縦軸に従業員名（またはリソース）、横軸に時間（1時間単位など調整可能）を表示する。
    *   各従業員の勤務時間帯をタスクバーで表示する。
    *   タスクバーには業務内容の詳細（タスク名、備考など）を表示する。
    *   前日/翌日へのナビゲーション機能を提供する。
*   **F-VW-004: 休日/指定休の表示**
    *   アプリ内で設定された休日/指定休の従業員は、ガントチャート上で該当期間が非稼働であることが視覚的に分かるように表示する（例: 特定の色、パターン、またはタスクバー非表示）。

### 3.3. シフト編集機能
(主に日次・週次ガントチャート上)
*   **F-ED-001: タスクの新規作成・割り当て**
    *   ガントチャート上の空き時間や、「未割り当て業務」プールから業務（業務テンプレートまたは直接入力）を選択し、特定の従業員の特定の時間帯にドラッグ＆ドロップ、またはクリック操作でタスクを割り当てられる。
    *   割り当て時に、タスクの開始時刻、終了時刻（デフォルト期間を設定可能、調整可能）、担当従業員、業務内容が設定される。
*   **F-ED-002: タスクバーの長さ調整**
    *   割り当てられたタスクバーの開始時刻または終了時刻の端をドラッグすることで、勤務時間（タスクの期間）を調整できる。時間単位は設定可能（例: 15分、30分、1時間）。
*   **F-ED-003: タスクの移動**
    *   割り当てられたタスクバーをドラッグ＆ドロップすることで、同じ従業員の別の時間帯、または別の従業員の同じ/別の時間帯に移動できる。
*   **F-ED-004: タスク内容の編集**
    *   タスクバーをクリック（またはダブルクリック）すると、タスクの詳細（業務内容テキスト、場所、備考、開始/終了日時など）を編集できるモーダルダイアログまたはインライン編集機能が表示される。
*   **F-ED-005: タスクの削除**
    *   タスクバーを選択し、削除ボタンまたはキーボードのDeleteキーでタスクを削除できる。確認ダイアログを表示する（任意）。
*   **F-ED-006: タスクの複製**
    *   既存のタスクを複製し、別の時間や従業員に割り当てる機能（例: Ctrl/Cmd + ドラッグ、または右クリックメニューから）。

### 3.4. スタッフ管理機能
*   **F-SM-001: スタッフの登録**
    *   新しいスタッフの氏名を登録できる。
*   **F-SM-002: スタッフの編集**
    *   既存スタッフの氏名を編集できる。
*   **F-SM-003: スタッフの削除**
    *   既存スタッフを削除できる。削除時に、そのスタッフに割り当てられているタスクがある場合は、それらのタスクを削除するか未割り当てにするかを選択できる（デフォルトは削除）。関連する休日情報も削除する。
*   **F-SM-004: スタッフの休日/指定休設定**
    *   カレンダー等を利用して、特定のスタッフの公休や指定休を日付単位で設定できる。

### 3.5. 業務（タスク）管理機能
*   **F-TM-001: 業務テンプレートの登録**
    *   頻繁に使用する業務内容（例: 「フロント業務」「客室清掃A」）をテンプレートとして登録できる。
    *   テンプレートには、業務名、デフォルトの所要時間（任意）、業務カテゴリ（色分け用、任意）などを含められる。
*   **F-TM-002: 業務テンプレートの編集・削除**
    *   登録済みの業務テンプレートを編集・削除できる。
*   **F-TM-003: 「未割り当て業務」プールへのテンプレートからの追加**
    *   日次・週次ビューの「未割り当て業務」プール（またはそれに類するUI）に、登録された業務テンプレートから簡単に業務（タスクの雛形）を追加できる。

## 4. 非機能要件

### 4.1. UI/UX (ユーザーインターフェース/ユーザーエクスペリエンス)
*   **NF-001:** ユーザーインターフェースはシンプルで直感的であり、マニュアルを熟読せずとも基本的な操作が理解できるように設計する。
*   **NF-002:** 学習コストを低く抑え、初めてのユーザーでも容易に操作を開始できるようにする。
*   **NF-003:** シフト状況が一目で把握できるよう、色分けやアイコンを効果的に使用し、視覚的に分かりやすいデザインとする。ガントチャートの操作性（ドラッグ、リサイズなど）はスムーズであること。

### 4.2. パフォーマンス
*   **NF-004:** 一般的な利用状況（例: 1ヶ月分のシフトデータ、従業員数30名程度、各従業員が日に1～3タスク）において、画面表示やデータ操作、特にガントチャートのレンダリングやインタラクションが遅延なく快適に行えること。
*   **NF-005:** ドラッグ＆ドロップなどのインタラクティブな操作がスムーズに応答すること。

### 4.3. ブラウザ互換性
*   **NF-006:** 最新版の主要なモダンブラウザ（Google Chrome, Mozilla Firefox, Microsoft Edge, Apple Safari）で正常に動作すること。

### 4.4. セキュリティ
*   **NF-007:** シフトデータ、スタッフ情報等の個人情報を含むデータは、ユーザーのブラウザのローカルストレージにのみ保存され、外部のサーバーへ意図せず送信されることがないように設計する。

### 4.5. メンテナンス性
*   **NF-008:** 将来的な機能追加や不具合修正が比較的容易に行えるよう、コードは適切に構造化され、可読性が高い状態を保つこと（適切なJavaScriptフレームワークの利用を推奨）。
    *   【追記】ガントチャート機能に関しては、選定された外部ライブラリ（例: `vue-ganttastic`）のバージョンアップや仕様変更への追従も考慮する。

## 5. 将来的な拡張機能（検討事項）
以下は、本プロジェクトの初期リリースには含めないが、将来的に追加を検討する機能である。
*   勤務時間の自動集計機能（スタッフ別、期間別など）
*   人員過不足アラート機能（設定された必要人数に対する過不足を警告）
*   休憩時間管理機能（シフト内の休憩タスクとしてではなく、勤務タスク内の休憩時間として設定・表示・集計）
*   シフトパターン保存/読込機能（頻用するシフトの組み合わせをテンプレート化）
*   印刷機能（表示中のシフト表を印刷に適したレイアウトで出力）
*   競合チェック機能（同一スタッフが重複する時間帯に割り当てられることを防止、または警告）

## 6. 制約事項・前提条件

### 6.1. 開発環境
*   本システムはフロントエンド技術（HTML, CSS, JavaScript）のみで開発される。
*   【追記】ガントチャート機能の実装には、`vue-ganttastic` または同等の機能を持つVue 3対応の外部コンポーネントライブラリを利用する。

### 6.2. 運用環境
*   ユーザーは、本システムがサポートするモダンブラウザがインストールされたPC環境で利用することを前提とする。
*   インターネット接続は、アプリケーションの初期ロード時には必要となるが、データ保存・操作はローカルストレージで行うため、オフラインでの利用も一部可能とする（要検討：データの同期はスコープ外）。

### 6.3. 除外事項
本プロジェクトのスコープには、以下の事項は含まれない。
*   サーバーサイドの機能（データベース連携、複数ユーザーによる同時編集、リアルタイム同期など）
*   ユーザー認証機能
*   専用のモバイルアプリケーションの開発（レスポンシブデザインによるモバイルブラウザでの基本的な閲覧は考慮するが、操作性はPCを主とする）

## 7. 用語集 (任意)
*   **ローカルストレージ:** ウェブブラウザが提供する、ユーザーのコンピュータ上にデータを保存する仕組み。
*   **ガントチャート:** プロジェクト管理や生産管理などで工程管理に用いられる表の一種で、作業計画を視覚的に表現するもの。本システムではシフトの時間的割り当てを表現するために使用する。
*   **フロントエンド:** ユーザーが直接操作するウェブページの表示や動作に関する部分。
*   **タスク:** 個々の業務、作業単位。本システムでは、特定の時間帯に特定のスタッフに割り当てられた具体的な作業や勤務ブロックを指す。
*   **業務テンプレート:** 頻繁に使用するタスクの雛形。タスク名やデフォルト所要時間などを含む。

## 8. 改訂履歴

| バージョン | 改訂日     | 改訂者       | 改訂内容                                                                 |
| :------- | :--------- | :----------- | :----------------------------------------------------------------------- |
| 1.0      | 2024-05-16 | (あなたの名前) | 初版作成                                                                 |
| 1.1      | 2024-05-21 | (あなたの名前) | システム構成、メンテナンス性、開発環境にガントチャートライブラリ利用の旨を追記。CSVインポート/エクスポート形式を更新。その他微修正。 |
|          |            |              |                                                                          |